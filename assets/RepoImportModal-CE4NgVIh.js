import{r as t,j as e}from"./index-Cen6tLtI.js";const g=({onClose:b,onImport:x})=>{const[a,m]=t.useState([]),[p,h]=t.useState(!0),[s,u]=t.useState(null),[n,f]=t.useState(""),[l,d]=t.useState(null),y="https://api.github.com/repos/Beblia/Holy-Bible-XML-Format/contents";t.useEffect(()=>{(async()=>{try{const o=await fetch(y);if(!o.ok)throw new Error("Failed to fetch");const c=await o.json();Array.isArray(c)&&m(c)}catch{u("Failed to load repository. Rate limit may be exceeded or repo moved.")}finally{h(!1)}})()},[]);const v=async r=>{d(r.name);try{await x(r.download_url,r.name)}catch(o){console.error(o)}finally{d(null)}},i=a.filter(r=>r.name.toLowerCase().includes(n.toLowerCase())&&r.name.toLowerCase().endsWith(".xml"));return e.jsxs("div",{className:"bg-bg border border-border w-full max-w-2xl flex flex-col h-[80vh] shadow-2xl rounded-xl overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center bg-card",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Online Bible Repository"}),e.jsx("button",{onClick:b,className:"text-xl opacity-50 hover:opacity-100",children:"Ã—"})]}),e.jsx("div",{className:"p-4 border-b border-border bg-bg",children:e.jsx("input",{type:"text",placeholder:"Search available bibles...",className:"w-full bg-card border border-border rounded px-3 py-2 text-sm focus:border-brand outline-none",value:n,onChange:r=>f(r.target.value),autoFocus:!0})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:p?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-6 h-6 border-2 border-brand border-t-transparent rounded-full animate-spin"})}):s?e.jsxs("div",{className:"text-center text-red-400 py-8 px-4",children:[e.jsx("p",{className:"font-bold mb-1",children:"Error"}),e.jsx("p",{className:"text-xs opacity-80",children:s})]}):e.jsx("div",{className:"space-y-2",children:i.length===0?e.jsx("div",{className:"text-center opacity-50 py-8",children:a.length===0?"No files found in repository.":"No matching files found."}):i.map(r=>e.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-card rounded border border-transparent hover:border-border transition-colors",children:[e.jsxs("div",{className:"min-w-0 pr-4",children:[e.jsx("div",{className:"text-sm font-bold truncate",children:r.name.replace(/_/g," ").replace(".xml","")}),e.jsx("div",{className:"text-[10px] font-mono opacity-50 truncate",children:r.name})]}),e.jsx("button",{onClick:()=>v(r),disabled:!!l,className:"px-3 py-1.5 bg-brand/10 text-brand rounded text-xs font-bold uppercase tracking-wider hover:bg-brand hover:text-white transition-all disabled:opacity-50",children:l===r.name?"Saving...":"Download"})]},r.name))})}),e.jsx("div",{className:"p-2 border-t border-border bg-card/50 text-[10px] text-center opacity-40",children:"Source: github.com/Beblia/Holy-Bible-XML-Format"})]})};export{g as RepoImportModal};
