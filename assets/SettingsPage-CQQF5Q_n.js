import{j as e,T as be,r as m,d as N,a as xe,b as me}from"./index-Cen6tLtI.js";import{a as pe}from"./aiService-CPwEHgnh.js";const ue=({currentTheme:r,onThemeChange:n,fontSize:d,onFontSizeChange:l,verseLayout:t,onVerseLayoutChange:p,highlightStyle:b="background",onHighlightStyleChange:x,verseSpacing:u=16,onVerseSpacingChange:h,readerPadding:s=24,onReaderPaddingChange:o,hudAlignment:c="center",onHudAlignmentChange:f,immersiveVariant:j="list",onImmersiveVariantChange:g,slideshowEnabled:y,onSlideshowToggle:T,slideshowInterval:k,onSlideshowIntervalChange:A,overlayOpacity:w,onOverlayOpacityChange:O,visualEffectsEnabled:C=!1,onVisualEffectsToggle:S,highContrastFlash:P=!1,onHighContrastFlashToggle:I})=>e.jsxs("section",{className:"py-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 uppercase tracking-wider opacity-80",children:"Appearance"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Theme"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Object.values(be).map(a=>e.jsx("button",{onClick:()=>n(a),className:`px-2 py-2 text-xs rounded border transition-colors capitalize
                                ${r===a?"border-brand text-brand font-bold bg-brand/10":"border-border text-text/70 hover:border-brand/50"}
                            `,children:a.replace("_"," ")},a))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Layout"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p("block"),className:`flex-1 py-2 text-xs border rounded transition-colors ${t==="block"?"border-brand text-brand font-bold bg-brand/10":"border-border text-text/70"}`,children:"Verse-by-Verse"}),e.jsx("button",{onClick:()=>p("paragraph"),className:`flex-1 py-2 text-xs border rounded transition-colors ${t==="paragraph"?"border-brand text-brand font-bold bg-brand/10":"border-border text-text/70"}`,children:"Paragraph"})]})]}),x&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Highlight Style"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[e.jsx("button",{onClick:()=>x("background"),className:`py-2 text-xs border rounded transition-colors ${b==="background"?"border-brand text-brand font-bold bg-brand/10":"border-border text-text/70"}`,children:"Background"}),e.jsx("button",{onClick:()=>x("text-highlight"),className:`py-2 text-xs border rounded transition-colors ${b==="text-highlight"?"border-brand text-brand font-bold bg-brand/10":"border-border text-text/70"}`,children:"Highlighter"}),e.jsx("button",{onClick:()=>x("text"),className:`py-2 text-xs border rounded transition-colors ${b==="text"?"border-brand text-brand font-bold bg-brand/10":"border-border text-text/70"}`,children:"Text Color"}),e.jsx("button",{onClick:()=>x("underline"),className:`py-2 text-xs border rounded transition-colors ${b==="underline"?"border-brand text-brand font-bold bg-brand/10":"border-border text-text/70"}`,children:"Underline"})]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-bold mb-2 block",children:["Font Size: ",d,"px"]}),e.jsx("input",{type:"range",min:"12",max:"48",step:"2",value:d,onChange:a=>l(Number(a.target.value)),className:"w-full accent-brand h-1 bg-border rounded-lg appearance-none cursor-pointer"})]}),h&&e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-bold mb-2 block",children:["Verse Spacing: ",u,"px"]}),e.jsx("input",{type:"range",min:"0",max:"64",step:"4",value:u,onChange:a=>h(Number(a.target.value)),className:"w-full accent-brand h-1 bg-border rounded-lg appearance-none cursor-pointer"})]}),o&&e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-bold mb-2 block",children:["Page Margin: ",s,"px"]}),e.jsx("input",{type:"range",min:"0",max:"120",step:"8",value:s,onChange:a=>o(Number(a.target.value)),className:"w-full accent-brand h-1 bg-border rounded-lg appearance-none cursor-pointer"})]})]}),f&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Compact Controller Position"}),e.jsx("div",{className:"flex gap-2",children:["left","center","right"].map(a=>e.jsx("button",{onClick:()=>f(a),className:`flex-1 py-1.5 text-xs capitalize border rounded transition-colors ${c===a?"border-brand text-brand font-bold":"border-border opacity-70"}`,children:a},a))})]}),g&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Immersive Mode Style"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g("list"),className:`flex-1 py-1.5 text-xs border rounded transition-colors ${j==="list"?"border-brand text-brand font-bold":"border-border opacity-70"}`,children:"Standard List"}),e.jsx("button",{onClick:()=>g("focus"),className:`flex-1 py-1.5 text-xs border rounded transition-colors ${j==="focus"?"border-brand text-brand font-bold":"border-border opacity-70"}`,children:"Focus (Slide)"})]}),e.jsx("p",{className:"text-[10px] opacity-50 mt-1",children:"Focus style centers one verse/group at a time when immersive mode is active."})]}),e.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[S&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold block",children:"Visual Effects"}),e.jsx("p",{className:"text-[10px] opacity-60",children:"Flash screen on verse change"})]}),e.jsx("input",{type:"checkbox",checked:C,onChange:a=>S(a.target.checked),className:"accent-brand w-5 h-5"})]}),C&&I&&e.jsxs("div",{className:"flex items-center justify-between pl-4 border-l-2 border-border/50",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block",children:"High Contrast Alert"}),e.jsx("p",{className:"text-[10px] opacity-60",children:"Inverts colors briefly for maximum attention"})]}),e.jsx("input",{type:"checkbox",checked:P,onChange:a=>I(a.target.checked),className:"accent-brand w-4 h-4"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-bold",children:"Slideshow Mode (Legacy)"}),e.jsx("input",{type:"checkbox",checked:y,onChange:a=>T(a.target.checked),className:"accent-brand w-5 h-5"})]}),y&&e.jsxs("div",{className:"space-y-4 pl-2 border-l-2 border-border/50",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold block mb-1",children:["Interval: ",k,"s"]}),e.jsx("input",{type:"range",min:"10",max:"600",step:"10",value:k,onChange:a=>A(Number(a.target.value)),className:"w-full accent-brand h-1 bg-border rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold block mb-1",children:["Opacity: ",Math.round(w*100),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:w,onChange:a=>O(Number(a.target.value)),className:"w-full accent-brand h-1 bg-border rounded-lg appearance-none cursor-pointer"})]})]})]})]}),he=({audioSettings:r,onAudioSettingsChange:n,bgmAssets:d,sfxAssets:l})=>e.jsxs("section",{className:"py-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 uppercase tracking-wider opacity-80",children:"Audio"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-bold",children:"Background Music"}),e.jsx("input",{type:"checkbox",checked:r.bgmEnabled,onChange:t=>n({bgmEnabled:t.target.checked}),className:"accent-brand w-5 h-5"})]}),r.bgmEnabled&&e.jsx("div",{className:"space-y-3 pl-2 border-l-2 border-border/50 mt-2",children:d.length===0?e.jsx("p",{className:"text-xs text-red-400",children:"No tracks. Import via Data Manager."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("select",{value:r.activeBgmId||"",onChange:t=>n({activeBgmId:t.target.value}),className:"flex-1 bg-bg border border-border rounded p-1.5 text-xs",children:d.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),e.jsx("button",{onClick:()=>n({bgmMode:r.bgmMode==="repeat"?"shuffle":"repeat"}),className:"px-2 py-1.5 rounded border border-border text-xs uppercase font-bold",children:r.bgmMode})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold block mb-1",children:["Volume: ",Math.round(r.bgmVolume*100),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:r.bgmVolume,onChange:t=>n({bgmVolume:Number(t.target.value)}),className:"w-full accent-brand h-1 bg-border rounded-lg appearance-none cursor-pointer"})]})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-bold",children:"Verse Click SFX"}),e.jsx("input",{type:"checkbox",checked:r.sfxEnabled,onChange:t=>n({sfxEnabled:t.target.checked}),className:"accent-brand w-5 h-5"})]}),r.sfxEnabled&&e.jsx("div",{className:"space-y-3 pl-2 border-l-2 border-border/50 mt-2",children:l.length===0?e.jsx("p",{className:"text-xs text-red-400",children:"No SFX. Import via Data Manager."}):e.jsxs(e.Fragment,{children:[e.jsx("select",{value:r.activeSfxId||"",onChange:t=>n({activeSfxId:t.target.value}),className:"w-full bg-bg border border-border rounded p-1.5 text-xs",children:l.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold block mb-1",children:["Volume: ",Math.round(r.sfxVolume*100),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:r.sfxVolume,onChange:t=>n({sfxVolume:Number(t.target.value)}),className:"w-full accent-brand h-1 bg-border rounded-lg appearance-none cursor-pointer"})]})]})})]})]})]}),fe=({googleClientId:r,onClientIdChange:n,isLoggedInToGoogle:d,onGoogleLogin:l,onSync:t,isSyncing:p,syncStatus:b,originUrl:x,lastSyncTime:u,isManagedByEnv:h})=>e.jsxs("section",{className:"py-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 uppercase tracking-wider opacity-80",children:"Cloud Sync (Google Drive)"}),e.jsxs("div",{className:"space-y-4",children:[r?e.jsxs("div",{className:"flex items-center justify-between border border-border rounded p-2",children:[e.jsxs("div",{className:"overflow-hidden mr-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-[10px] opacity-50 uppercase font-bold",children:"Client ID"}),h&&e.jsxs("span",{className:"text-[10px] bg-brand/10 text-brand px-1.5 py-0.5 rounded font-bold uppercase tracking-wider flex items-center gap-1",children:[e.jsx("svg",{className:"w-2 h-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),"Env Managed"]})]}),e.jsx("p",{className:"text-xs truncate font-mono opacity-80",children:h?"••••••••••••••••••••":r})]}),!h&&e.jsx("button",{onClick:()=>n(""),className:"text-xs text-red-400 border border-border hover:border-red-400 px-2 py-1 rounded",children:"Unlink"})]}):e.jsxs("div",{className:"p-3 border border-border rounded",children:[e.jsx("label",{className:"text-xs font-bold uppercase opacity-60 mb-2 block",children:"Google Client ID"}),e.jsx("input",{type:"text",placeholder:"Paste Client ID Here",className:"w-full bg-bg border border-border rounded p-2 text-sm mb-3 focus:border-brand focus:outline-none",value:r,onChange:s=>n(s.target.value)}),e.jsxs("div",{className:"text-xs text-text/60",children:[e.jsx("p",{className:"mb-1",children:"Required Origin URL:"}),e.jsx("code",{className:"block bg-black/10 p-1 rounded font-mono select-all break-all",children:x})]})]}),r&&!d&&e.jsx("button",{onClick:l,className:"w-full py-2 bg-white text-gray-800 font-bold text-sm rounded border border-gray-300 hover:bg-gray-100",children:"Sign in with Google"}),d&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-green-500 font-bold",children:[e.jsx("span",{children:"Connected"}),u&&e.jsxs("span",{children:["Last: ",u]})]}),b&&e.jsx("p",{className:"text-xs font-mono opacity-60",children:b}),e.jsx("button",{onClick:t,disabled:p,className:"w-full py-2 bg-brand text-white font-bold text-sm rounded hover:opacity-90 disabled:opacity-50",children:p?"Syncing...":"Sync Now"})]})]})]}),ge=({config:r,onChange:n})=>{const[d,l]=m.useState({type:"idle",msg:""}),[t,p]=m.useState(""),b=s=>{let o={provider:s};s==="gemini"?(o.modelId="gemini-3-flash-preview",o.baseUrl=""):s==="groq"?(o.modelId="llama-3.3-70b-versatile",o.baseUrl="https://api.groq.com/openai/v1"):(o.modelId="gpt-4o-mini",o.baseUrl="https://api.openai.com/v1"),n(o),l({type:"idle",msg:""})},x=async()=>{l({type:"loading",msg:"Testing connection..."});try{const s={...r};r.provider==="groq"&&!r.baseUrl&&(s.baseUrl="https://api.groq.com/openai/v1");const o=pe.generateInsightStream("Reply with exactly one word: 'Connected'.",s);let c="";for await(const f of o)c+=f;c.length>0?l({type:"success",msg:`Success! Response: "${c}"`}):l({type:"error",msg:"Connection successful, but received empty response."})}catch(s){console.error("Test failed",s),l({type:"error",msg:s.message||"Failed to connect."})}},u=()=>{if(!t.trim())return;const s=r.customPrompts||[];s.includes(t.trim())||n({customPrompts:[...s,t.trim()]}),p("")},h=s=>{const o=r.customPrompts||[];n({customPrompts:o.filter(c=>c!==s)})};return e.jsxs("section",{className:"py-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 uppercase tracking-wider opacity-80",children:"AI Assistant"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold block mb-2",children:"Provider"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>b("gemini"),className:`p-3 rounded border text-left transition-all ${r.provider==="gemini"?"border-brand bg-brand/10 ring-1 ring-brand":"border-border hover:border-text/50"}`,children:[e.jsx("div",{className:"font-bold text-sm",children:"Google Gemini"}),e.jsx("div",{className:"text-[10px] opacity-60 mt-1",children:"Recommended"})]}),e.jsxs("button",{onClick:()=>b("groq"),className:`p-3 rounded border text-left transition-all ${r.provider==="groq"?"border-brand bg-brand/10 ring-1 ring-brand":"border-border hover:border-text/50"}`,children:[e.jsx("div",{className:"font-bold text-sm",children:"Groq Cloud"}),e.jsx("div",{className:"text-[10px] opacity-60 mt-1",children:"Fastest Inference"})]}),e.jsxs("button",{onClick:()=>b("openai_compatible"),className:`p-3 rounded border text-left transition-all ${r.provider==="openai_compatible"?"border-brand bg-brand/10 ring-1 ring-brand":"border-border hover:border-text/50"}`,children:[e.jsx("div",{className:"font-bold text-sm",children:"Custom / OpenAI"}),e.jsx("div",{className:"text-[10px] opacity-60 mt-1",children:"Compatible APIs"})]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 space-y-4 animate-in fade-in",children:[r.provider==="gemini"?e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"p-2 bg-green-500/10 text-green-500 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm",children:"Gemini Configured"}),e.jsx("p",{className:"text-xs opacity-60 mt-1 leading-relaxed",children:"Using system environment key. No extra setup required."})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase opacity-60 mb-1 block",children:"API Key"}),e.jsx("input",{type:"password",value:r.apiKey,onChange:s=>n({apiKey:s.target.value}),placeholder:`Enter your ${r.provider==="groq"?"Groq":"Provider"} API Key`,className:"w-full bg-bg border border-border rounded p-2 text-sm focus:border-brand focus:outline-none font-mono"}),e.jsx("p",{className:"text-[10px] opacity-40 mt-1",children:"Stored locally in your browser."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase opacity-60 mb-1 block",children:"Model ID"}),e.jsx("input",{type:"text",value:r.modelId,onChange:s=>n({modelId:s.target.value}),className:"w-full bg-bg border border-border rounded p-2 text-sm focus:border-brand focus:outline-none"}),r.provider==="groq"&&r.modelId.includes("8192")&&e.jsxs("p",{className:"text-[10px] text-red-400 mt-1",children:["Note: The 8192 model is deprecated. Use ",e.jsx("b",{children:"llama-3.3-70b-versatile"}),"."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase opacity-60 mb-1 block",children:"Base URL"}),e.jsx("input",{type:"text",value:r.baseUrl,onChange:s=>n({baseUrl:s.target.value}),placeholder:r.provider==="groq"?"https://api.groq.com/openai/v1":"https://api.openai.com/v1",className:"w-full bg-bg border border-border rounded p-2 text-sm focus:border-brand focus:outline-none"})]})]})]}),e.jsx("div",{className:"pt-2 border-t border-border mt-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 mr-4",children:d.type!=="idle"&&e.jsxs("div",{className:`text-xs p-2 rounded border ${d.type==="loading"?"bg-blue-500/10 text-blue-400 border-blue-500/30":d.type==="success"?"bg-green-500/10 text-green-400 border-green-500/30":"bg-red-500/10 text-red-400 border-red-500/30"}`,children:[d.type==="loading"&&e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-blue-400 mr-2 animate-pulse"}),d.msg]})}),e.jsx("button",{onClick:x,disabled:d.type==="loading",className:"px-4 py-2 bg-card border border-border hover:border-brand rounded text-xs font-bold uppercase transition-colors disabled:opacity-50",children:"Test Connection"})]})})]}),e.jsxs("div",{className:"border-t border-border pt-6",children:[e.jsx("h3",{className:"text-sm font-bold mb-3",children:"Custom Suggestions"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:t,onChange:s=>p(s.target.value),onKeyDown:s=>s.key==="Enter"&&u(),placeholder:"Add a reusable query (e.g., 'Summarize in 3 bullet points')...",className:"flex-1 bg-bg border border-border rounded px-3 py-2 text-xs focus:border-brand outline-none"}),e.jsx("button",{onClick:u,disabled:!t.trim(),className:"px-4 py-2 bg-brand/10 text-brand border border-brand/20 rounded text-xs font-bold uppercase hover:bg-brand hover:text-white disabled:opacity-50",children:"Add"})]}),!r.customPrompts||r.customPrompts.length===0?e.jsx("p",{className:"text-[10px] opacity-40 italic",children:"No custom suggestions added yet."}):e.jsx("div",{className:"flex flex-wrap gap-2",children:r.customPrompts.map((s,o)=>e.jsxs("div",{className:"flex items-center gap-2 bg-card border border-border rounded-full px-3 py-1 text-xs",children:[e.jsx("span",{className:"truncate max-w-[200px]",children:s}),e.jsx("button",{onClick:()=>h(s),className:"text-red-400 hover:text-red-500 font-bold",children:"×"})]},o))})]})]})]})},je={theme:"dark",fontSize:18,fontFamily:"Merriweather",verseLayout:"block",highlightStyle:"background",showVerseNumbers:!0,slideshowEnabled:!1,slideshowInterval:60,overlayOpacity:.8,timeModeConfig:{enabled:!1,variant:"full",controlStyle:"standard",duration:5,isPlaying:!1,isSystemPaused:!1,showProgressBar:!0,groupingEnabled:!1,selectionEnabled:!0,savedIndex:0},bgmEnabled:!1,bgmVolume:.3,bgmMode:"shuffle",activeBgmId:null,sfxEnabled:!0,sfxVolume:.5,activeSfxId:null,compLayout:"off",compIds:[],googleClientId:"",lastSyncTimestamp:0,lastSyncTime:null,activeTranslationId:null,lastBook:"Genesis",lastChapter:1,ttsEnabled:!1,system_debug_mode:!1,system_max_backups:5,ui_animation_speed:1,export_format_default:"json"},ve=({onClose:r})=>{const[n,d]=m.useState(""),[l,t]=m.useState(null),[p,b]=m.useState(!0);m.useEffect(()=>{(async()=>{try{const o=await N.getAllSettings(),c={...je,...o},f=Object.keys(c).sort().reduce((j,g)=>(j[g]=c[g],j),{});d(JSON.stringify(f,null,2)),b(!1)}catch{t({msg:"Failed to load settings.",type:"error"})}})()},[]);const x=()=>{try{const s=JSON.parse(n);d(JSON.stringify(s,null,2)),t({msg:"Formatted.",type:"info"})}catch{t({msg:"Invalid JSON syntax.",type:"error"})}},u=async()=>{try{const s=JSON.parse(n);await N.saveSettingsBatch(s),t({msg:"Config saved. Reloading...",type:"success"}),setTimeout(()=>{window.location.reload()},1e3)}catch{t({msg:"Invalid JSON. Cannot save.",type:"error"})}},h=()=>{const s=new Blob([n],{type:"application/json"}),o=URL.createObjectURL(s),c=document.createElement("a");c.href=o,c.download=`divine_words_config_${Date.now()}.json`,c.click(),URL.revokeObjectURL(o)};return e.jsxs("section",{className:"flex flex-col h-full animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold uppercase tracking-wider text-brand",children:"System Configuration"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:h,className:"px-3 py-1 text-xs border border-border rounded hover:bg-white/5 transition-colors font-mono",children:"Export"}),e.jsx("button",{onClick:x,className:"px-3 py-1 text-xs border border-border rounded hover:bg-white/5 transition-colors font-mono",children:"Format"})]})]}),e.jsx("div",{className:"flex-1 relative border border-border rounded-lg overflow-hidden bg-[#0d1117]",children:p?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-mono opacity-50",children:"Loading Config..."}):e.jsx("textarea",{value:n,onChange:s=>d(s.target.value),className:"w-full h-full bg-transparent p-4 font-mono text-xs text-green-400 outline-none resize-none leading-relaxed",spellCheck:"false"})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("div",{className:`text-xs font-mono ${(l==null?void 0:l.type)==="error"?"text-red-400":(l==null?void 0:l.type)==="success"?"text-green-400":"opacity-50"}`,children:l?l.msg:"Edit keys carefully. Invalid config may break the app."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-xs font-bold uppercase hover:text-text opacity-60 hover:opacity-100",children:"Cancel"}),e.jsx("button",{onClick:u,className:"px-6 py-2 bg-brand text-white text-xs font-bold uppercase rounded hover:opacity-90",children:"Apply & Restart"})]})]})]})},Ne={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GOOGLE_CLIENT_ID:"767326088498-h5ecfmq7q5vpl5vs17k4jikrucfuc7b5.apps.googleusercontent.com"};var _={};function we({currentTheme:r,onThemeChange:n,fontSize:d,onFontSizeChange:l,verseLayout:t,onVerseLayoutChange:p,highlightStyle:b,onHighlightStyleChange:x,verseSpacing:u,onVerseSpacingChange:h,readerPadding:s,onReaderPaddingChange:o,hudAlignment:c,onHudAlignmentChange:f,immersiveVariant:j,onImmersiveVariantChange:g,visualEffectsEnabled:y,onVisualEffectsToggle:T,highContrastFlash:k,onHighContrastFlashToggle:A,slideshowEnabled:w,onSlideshowToggle:O,slideshowInterval:C,onSlideshowIntervalChange:S,overlayOpacity:P,onOverlayOpacityChange:I,audioSettings:a,onAudioSettingsChange:D,ttsEnabled:U,onTTSToggle:q,aiConfig:$,onAIConfigChange:F,googleClientId:G,onClientIdChange:V,isLoggedInToGoogle:z,onGoogleLogin:B,onSync:J,isSyncing:K,syncStatus:E,onNavigateDataManager:W,onNavigateHelp:X,onNavigateAbout:H}){const[v,Q]=m.useState("appearance"),[Y,Z]=m.useState(""),[L,ee]=m.useState([]),[se,R]=m.useState(null),[re,M]=m.useState(!1),te=xe(),{setHasCompletedOnboarding:ae}=me();m.useEffect(()=>{Z(window.location.origin),N.getAudio().then(ee),N.getSetting("lastSyncTime",null).then(R)},[]),m.useEffect(()=>{if(E&&E.includes("successfully")){const i=new Date().toLocaleString();R(i),N.saveSetting("lastSyncTime",i)}},[E]);const ne=async()=>{if(confirm("Are you sure? This will delete all translations, collections, and settings. This action cannot be undone.")){await N.deleteDatabase();try{window.location.reload()}catch{console.warn("Reload not supported in this environment"),te("/")}}},oe=()=>{ae(!1),window.location.reload()},le=L.filter(i=>i.category==="bgm"),de=L.filter(i=>i.category==="sfx"),ce=(()=>{try{if(typeof import.meta<"u"&&Ne)return!0}catch{}try{if(typeof process<"u"&&_&&(_.REACT_APP_GOOGLE_CLIENT_ID||_.GOOGLE_CLIENT_ID||_.VITE_GOOGLE_CLIENT_ID))return!0}catch{}return!1})();if(re)return e.jsx("div",{className:"fixed inset-0 z-[100] bg-bg flex flex-col p-4 sm:p-8",children:e.jsx(ve,{onClose:()=>M(!1)})});const ie=[{id:"appearance",label:"Appearance"},{id:"audio",label:"Audio"},{id:"ai",label:"AI"},{id:"sync",label:"Sync"},{id:"system",label:"System"}];return e.jsxs("div",{className:"min-h-screen bg-bg text-text p-4 sm:p-6 max-w-2xl mx-auto font-sans animate-in fade-in duration-300 pt-20 pb-20 relative z-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-6 border-b border-border pb-4",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Settings"})}),e.jsx("div",{className:"flex gap-6 mb-6 border-b border-border/50 overflow-x-auto no-scrollbar",children:ie.map(i=>e.jsx("button",{onClick:()=>Q(i.id),className:`pb-3 font-bold text-sm uppercase tracking-wider transition-all border-b-2 whitespace-nowrap ${v===i.id?"text-brand border-brand":"text-text/50 border-transparent hover:text-text hover:border-text/30"}`,children:i.label},i.id))}),e.jsxs("div",{className:"animate-in fade-in duration-300",children:[v==="appearance"&&e.jsx(ue,{currentTheme:r,onThemeChange:n,fontSize:d,onFontSizeChange:l,verseLayout:t,onVerseLayoutChange:p,highlightStyle:b,onHighlightStyleChange:x,verseSpacing:u,onVerseSpacingChange:h,readerPadding:s,onReaderPaddingChange:o,hudAlignment:c,onHudAlignmentChange:f,immersiveVariant:j,onImmersiveVariantChange:g,slideshowEnabled:w,onSlideshowToggle:O,slideshowInterval:C,onSlideshowIntervalChange:S,overlayOpacity:P,onOverlayOpacityChange:I,visualEffectsEnabled:y,onVisualEffectsToggle:T,highContrastFlash:k,onHighContrastFlashToggle:A}),v==="audio"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx(he,{audioSettings:a,onAudioSettingsChange:D,bgmAssets:le,sfxAssets:de}),e.jsxs("section",{className:"py-4 border-t border-border/50",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 uppercase tracking-wider opacity-80",children:"Text-to-Speech"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm",children:"Enable TTS Reader"}),e.jsx("p",{className:"text-xs opacity-60",children:"Show audio controls in the reader view."})]}),e.jsx("input",{type:"checkbox",checked:U,onChange:i=>q(i.target.checked),className:"accent-brand w-5 h-5"})]})]})]}),v==="ai"&&e.jsx(ge,{config:$,onChange:F}),v==="sync"&&e.jsx(fe,{googleClientId:G,onClientIdChange:V,isLoggedInToGoogle:z,onGoogleLogin:B,onSync:J,isSyncing:K,syncStatus:E,originUrl:Y,lastSyncTime:se,isManagedByEnv:ce}),v==="system"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{className:"py-4 grid grid-cols-1 gap-3",children:[e.jsx("h2",{className:"text-lg font-bold mb-2 uppercase tracking-wider opacity-80",children:"Shortcuts"}),e.jsxs("button",{onClick:W,className:"p-3 bg-card border border-border rounded-lg text-left font-bold text-sm hover:border-brand transition-colors flex justify-between items-center group",children:[e.jsx("span",{children:"Data Manager"}),e.jsx("span",{className:"opacity-50 group-hover:translate-x-1 transition-transform",children:"→"})]}),e.jsxs("button",{onClick:X,className:"p-3 bg-card border border-border rounded-lg text-left font-bold text-sm hover:border-brand transition-colors flex justify-between items-center group",children:[e.jsx("span",{children:"Help & Guide"}),e.jsx("span",{className:"opacity-50 group-hover:translate-x-1 transition-transform",children:"→"})]}),e.jsxs("button",{onClick:H,className:"p-3 bg-card border border-border rounded-lg text-left font-bold text-sm hover:border-brand transition-colors flex justify-between items-center group",children:[e.jsx("span",{children:"About Application"}),e.jsx("span",{className:"opacity-50 group-hover:translate-x-1 transition-transform",children:"→"})]})]}),e.jsxs("section",{className:"py-6 border-t border-border/50",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 uppercase tracking-wider opacity-80",children:"Maintenance"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:"Configuration Editor"}),e.jsx("div",{className:"text-xs opacity-60",children:"Edit raw JSON settings."})]}),e.jsx("button",{onClick:()=>M(!0),className:"text-xs font-mono border border-border px-3 py-1.5 rounded hover:bg-card hover:border-brand transition-colors",children:"Open"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:"Welcome Tour"}),e.jsx("div",{className:"text-xs opacity-60",children:"Replay the setup wizard."})]}),e.jsx("button",{onClick:oe,className:"text-xs font-mono border border-border px-3 py-1.5 rounded hover:bg-card hover:border-brand transition-colors",children:"Replay"})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-border/30",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm text-red-400",children:"Factory Reset"}),e.jsx("div",{className:"text-xs opacity-60",children:"Wipe all data and reset."})]}),e.jsx("button",{onClick:ne,className:"text-xs bg-red-900/20 text-red-400 border border-red-900/50 hover:bg-red-900/40 px-3 py-1.5 rounded transition-colors uppercase font-bold",children:"Reset App"})]})]})]})]})]})]})}export{we as SettingsPage};
